# È†ÖÁõÆ61  `Record`Âûã„Çí‰Ωø„Å£„Å¶ÂÄ§„ÅÆÂêåÊúü„Çí‰øù„Å§

## Ë¶ö„Åà„Å¶„Åä„Åè„Åπ„Åç„Åì„Å®

* „Éï„Çß„Ç§„É´„Ç™„Éº„Éó„É≥„Å®„Éï„Çß„Ç§„É´„ÇØ„É≠„Éº„Ç∫„Éâ„ÅÆ„Ç∏„É¨„É≥„Éû„ÇíË™çË≠ò„Åô„Çã„ÄÇ
* `Record`Âûã„Çí‰Ωø„Å£„Å¶„ÄÅÈñ¢ÈÄ£„Åô„ÇãÂÄ§„Å®Âûã„ÅÆÂêåÊúü„Çí‰øù„Å§„ÄÇ
* `Record`Âûã„Çí‰Ωø„Å£„Å¶„ÄÅ„Ç§„É≥„Çø„Éº„Éï„Çß„Ç§„Çπ„Å´Êñ∞„Åó„ÅÑ„Éó„É≠„Éë„ÉÜ„Ç£„ÇíËøΩÂä†„Åó„ÅüÈöõ„Å´„ÄÅ„Åù„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£„Å´Èñ¢„Åô„Çã‰Ωï„Çâ„Åã„ÅÆÈÅ∏Êäû„ÇíÂº∑Âà∂„Åô„Çã„Åì„Å®„ÇíÊ§úË®é„Åô„Çã„ÄÇ

## „Çµ„É≥„Éó„É´„Ç≥„Éº„Éâ

```ts
interface ScatterProps {
  // „Éá„Éº„Çø
  xs: number[];
  ys: number[];

  // Ë°®Á§∫
  xRange: [number, number];
  yRange: [number, number];
  color: string;

  // „Ç§„Éô„É≥„Éà
  onClick?: (x: number, y: number, index: number) => void;
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgMoLmSUAKUD2ADgM7IDeAUMsgPQ3KDjDID8Mg-QxXIAexAXMiAK4BbAEbQA2gF0A3OwCePPkNFRJM9nWSALCMBcnuw4AlOCADmEXmIEjoAGkVWo0uYZNnkFpTbvLH1BPgA2+FC8xGBQoMZq1BqAJQyAmwyAzwyAEwzs+CAAwv7ACADWAPy8ABQcvJbKtrKlHlC2oAAmECVe0ACUyAC8AHzIAG74wHUyAL5AA)

----

```ts
function shouldUpdate(
  oldProps: ScatterProps,
  newProps: ScatterProps
) {
  for (const kStr in oldProps) {
    const k = kStr as keyof ScatterProps;
    if (oldProps[k] !== newProps[k]) {
      if (k !== 'onClick') return true;
    }
  }
  return false;
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAZwBZxAGwCYFUAO2AhlAKYAUAUIonDgAoBOc+yAXIgMoQlmNMtkAGmqIwpAO4DWHbr1L9mrSgEpEAb1HA4jROQgJkURAGtOUXTCR1s05Gs00aBsEdOIAvKfO6iyU6QAnnDAXDxQfHYA3KI0MKHkNnYA2iYAuogAhB5e4lJKyKlpDrFO8XomWTmIAOQIAMKYMBAmNWqMpFAgjEgWIKQxTogAvqKjNB1dPYjARJjIA5TDQA)

----

```ts
function shouldUpdate(
  oldProps: ScatterProps,
  newProps: ScatterProps
) {
  return (
    oldProps.xs !== newProps.xs ||
    oldProps.ys !== newProps.ys ||
    oldProps.xRange !== newProps.xRange ||
    oldProps.yRange !== newProps.yRange ||
    oldProps.color !== newProps.color
    // ÔºàonClick„ÅØ„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Å™„ÅÑÔºâ
  );
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAZwBZxAGwCYFUAO2AhlAKYAUAUIonDgAoBOc+yAXIgMoQlmNMtkAGmqIwpAO4DWHbr1L9mrSgEpEAb1GNSUEIyRUaNOtmnIAdAA9kiAIQBee2MlmrNgD7vRxhkosBPGwcncSk-c0DET29aX0ErACUiMABzUjtHZzD4yyTU9OijWNNw-zy0jJCXUvKCryKTVwg6OEZKrKaWxhiAeh7EQAh-hABhTBgIAGtAewZAQYZAcoZAYYZAeoZAdQZAKwZAEQZASH-RFQBuSgBfIA)

----

```ts
interface ScatterProps {
  xs: number[];
  ys: number[];
  // ...
  onClick?: (x: number, y: number, index: number) => void;

  // Ê≥®ÊÑèÔºö„Åì„Åì„Å´Êñ∞„Åó„ÅÑ„Éó„É≠„Éë„ÉÜ„Ç£„ÇíËøΩÂä†„Åó„Åü„Çâ„ÄÅshouldUpdate„ÇíÊõ¥Êñ∞„Åô„Çã„Åì„Å®ÔºÅ
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgMoLmSUAKUD2ADgM7IDeAUMsgB7EBcyIArgLYBG0A2gLoDcVZAE8GTNpyi8B1APQzkAOiWD8IAMIAbYAgDWAfkYAKGoxYdoAGmGnxl5KAAmEE2PNQAlMgC8APmQA3fGAHAUE5ZEALm0B4Q0Asf8BlBjjAawZABtNAdQZAEQZAdYZAW4ZARYZAMYZAYoZAJIZAX-jAAqVUwH0GQEiGQEAGYgALfGYNBwBVQgdMCGLAF7NkwE0GQGiGOMALBkBAf4oAXyA)

----

```ts
const REQUIRES_UPDATE: Record<keyof ScatterProps, boolean> = {
  xs: true,
  ys: true,
  xRange: true,
  yRange: true,
  color: true,
  onClick: false,
};

function shouldUpdate(
  oldProps: ScatterProps,
  newProps: ScatterProps
) {
  for (const kStr in oldProps) {
    const k = kStr as keyof ScatterProps;
    if (oldProps[k] !== newProps[k] && REQUIRES_UPDATE[k]) {
      return true;
    }
  }
  return false;
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBASgUQIoFUCSiDKB9FAFAEQEEAVBALngFNQAnAEwB4BrKgTxADMZNgBDKFCq08tEAAcIAGhgAjECAA2VPmAB8MALwwA3gCgYMAB4RKUWgFcqUgzDamY5qzcNG4qgOZUzl67bbuYF4+zragiiC0IX6G4ADCigCWwMyUnHyKEH4AvgDcenqcFmDAUIngMBAAFiAWivQo4vQCVAAUtkr0ohIOvAJCImKSLjBgVADu3ZKUfYLCUxB6AJS6tpyRMK2gkLDMmOYwiWAwnQsr+oaG29AwzFq3+7QwfBC37Fw8-HODPfmXh9xWqchhAANrMAC6MAAhJptGNJiDwVCAGQo+DIdBYXCEUgIZHnWz-WhUKAWWjHJxUP6XbK2OmGElkikwdKZal6bJAA)

----

```ts
interface ScatterProps {
  // ...
  onDoubleClick?: () => void;
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgMoLmSUAKUD2ADgM7IDeAUMsgPQ3IB0TVy+IAIvgK4BGANhADCfYAgDWAfgBcyABQBKZAF4AfMgBu+YABMA3BQC+QA)

----

```ts
const REQUIRES_UPDATE: Record<keyof ScatterProps, boolean> = {
  //  ~~~~~~~~~~~~~~~ Property 'onDoubleClick' is missing in type ...
  //                  „Éó„É≠„Éë„ÉÜ„Ç£ 'onDoubleClick' „ÅØÂûã ... „Å´„ÅÇ„Çä„Åæ„Åõ„Çì...
};
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBASgUQIoFUCSiDKB9FAFAEQEEAVBALngFNQAnAEwB4BrKgTxADMZNgBDKFCq08tEAAcIAGhgAjECAA2VPmAB8MALwwA3gCgYMAPRHDAPwuWr1mKInCobGAHJwBEAFdZygMKKAlsDMzjD+EDAAtmEQ-mAA5qFgMI7iVDAAdJkGxqaGefkFeYDrDIC3DICLDIBjDIDFDC5unt5UfoHBMID2DIDR6hmZMIDWDIBCDIBRDIB+DIDaDIDJDJnpegC+ANxAA)

----

```ts
const PROPS_REQUIRING_UPDATE: (keyof ScatterProps)[] = [
  'xs',
  'ys',
  // ...
];
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBACgJQPJwMoH0EFECKBVASQQIDkBxdPOAEQEEAVLALhgAoBrAUwE8QAzGKmABDKFE4AnOBJAAHCAEoA2gF0YAXhhKAUDBgByAB4R9AGl0HuJ83oD0tmADpn2lQG4gA)
