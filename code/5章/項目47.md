# È†ÖÁõÆ47  „É¢„É≥„Ç≠„Éº„Éë„ÉÉ„ÉÅ„Åß„ÅØ„Å™„Åè„ÄÅ„Çà„ÇäÂûãÂÆâÂÖ®„Å™„Ç¢„Éó„É≠„Éº„ÉÅ„ÇíÊé°Áî®„Åô„Çã

## Ë¶ö„Åà„Å¶„Åä„Åè„Åπ„Åç„Åì„Å®

* „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞„ÇÑDOM„Å´„Éá„Éº„Çø„Çí‰øùÊåÅ„Åô„Çã„Çà„Çä„ÄÅÊßãÈÄ†Âåñ„Åï„Çå„Åü„Ç≥„Éº„Éâ„ÇíÂÑ™ÂÖà„Åô„Çã„ÄÇ
* ÁµÑ„ÅøËæº„Åø„ÅÆÂûã„Å´„Éá„Éº„Çø„Çí‰øùÊåÅ„Åó„Å™„Åë„Çå„Å∞„Å™„Çâ„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅÂûãÂÆâÂÖ®„Å™„Ç¢„Éó„É≠„Éº„ÉÅÔºà„Ç™„Éº„Ç∞„É°„É≥„ÉÜ„Éº„Ç∑„Éß„É≥„ÇÑ„Ç´„Çπ„Çø„É†„Ç§„É≥„Çø„Éº„Éï„Çß„Ç§„Çπ„Å∏„ÅÆ„Ç¢„Çµ„Éº„Ç∑„Éß„É≥Ôºâ„ÇíÊé°Áî®„Åô„Çã„ÄÇ
* „Ç™„Éº„Ç∞„É°„É≥„ÉÜ„Éº„Ç∑„Éß„É≥„ÅØ„Çπ„Ç≥„Éº„Éó„ÅÆÂïèÈ°å„Çí‰º¥„ÅÜ„Åì„Å®„ÇíÁêÜËß£„Åô„Çã„ÄÇÂÆüË°åÊôÇ„Å´„Åù„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„ÇãÂ†¥Âêà„ÄÅ`undefined`„ÇíÂê´„ÇÅ„Çã„ÄÇ

## „Çµ„É≥„Éó„É´„Ç≥„Éº„Éâ

```js
window.monkey = 'Tamarin';
document.monkey = 'Howler';
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/O4SwdgJg9sB0C2UwGsCmBPABAXkwcgBUBDeIgJ3DwG4AoaAYwFd5UwAXBJNLXPACRgAbVGWpA)

----

```js
const el = document.getElementById('colobus');
el.home = 'tree';
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBApgGxgXhgExMArgWzmKAOgHM4oBRBOPAgIQE8BJNACgHJQEQAjLCNgJQBuAFCJCACxB4UMNlABOcOGyFA)

----

```ts
document.monkey = 'Tamarin';
//       ~~~~~~ Property 'monkey' does not exist on type 'Document'
//              „Éó„É≠„Éë„ÉÜ„Ç£ 'monkey' „ÅØÂûã 'Document' „Å´Â≠òÂú®„Åó„Åæ„Åõ„Çì„ÄÇ
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/CYewxgrgtgpgdgFwHRRHA1jAngAgLw4DkAKgIZSkBOAlnIQNwBQA9MzuxzgH4+84AKlEAAcYlBLkKoM2QjlAwAzjjggEOGAA9qi9WhwTRRACLho8BIRZtOtzoHWGQLcMgRYZAYwyBihiLTMWOYHsGQGj1EzNYRDlAawZADW1ACnVAdQZAPwZAbQZAZIZAIAYgA)

----

```ts
(document as any).monkey = 'Tamarin';  // OK
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/BQEw9gxgrgtgpgOwC4AICGBndCCeBKAOhjAQGs4cUBeFAcgBU0Y0AnASwVoG4UUB6PigDyAaSA)

----

```ts
(document as any).monky = 'Tamarin';  // „Çπ„Éö„É´„Éü„Çπ„Åå„ÅÇ„Çã„Åå„ÄÅOK
(document as any).monkey = /Tamarin/;  // Âûã„ÅåÈñìÈÅï„Å£„Å¶„ÅÑ„Çã„Åå„ÄÅOK
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/BQEw9gxgrgtgpgOwC4AICGBndCCeBKAOhjAQGscUBeFAcgBU0Y0AnASwRoG4UUB6XlIE6GQFsMga4ZA+wyDAMgyAhBkDRDFMCADAHkA0gChQkWIlSZs+IiVJwK1XgyZsEvbnwGBo9SmBk1MCqCYGMGQGYMgEQYFK1UA)

----

```ts
interface User {
  name: string;
}

document.addEventListener("DOMContentLoaded", async () => {
  const response = await fetch('/api/users/current-user');
  const user = (await response.json()) as User;
  window.user = user;
  //     ~~~~ Property 'user' does not exist
  //          on type 'Window & typeof globalThis'.
  //          „Éó„É≠„Éë„ÉÜ„Ç£ 'user' „ÅØÂûã 'Window & typeof globalThis' „Å´
  //          Â≠òÂú®„Åó„Åæ„Åõ„Çì„ÄÇ
});

// ... ‰ªñ„ÅÆ„Å©„Åì„Åã„Åß ...
export function greetUser() {
  alert(`Hello ${window.user.name}!`);
  //                    ~~~~ Property 'user' does not exist on type 'Window...
  //                         „Éó„É≠„Éë„ÉÜ„Ç£ 'user' „ÅØÂûã 'Window...' „Å´Â≠òÂú®„Åó„Åæ„Åõ„Çì„ÄÇ
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgKoGdrIN4ChnIhwC2EAXMumFKAOYDcuAvrrgCYD2CArqeAHRw2bAKIA3COAAywKpOgAKAEQARAPIBZAMIdwksFI5CIbJQBpkcdAE8QCZAoCUyALwA+HPmQJdVZFAh0AAdfFBdLAHc4YDBkGAgwBAALBQByAHo4IOB07kwodHSeKADwAFo86FTHRgIfED9KqFcHOCiY-0CQhoh+ACt0XSdnKzR82uQI0E4I-iaWpon09IJVgD8NteQABSgOIOgwa2RUptTkTkDCDliIAA9ZMC9l1dfV3WQjg5OAdWmOCLIABkn2sBw4MGQtAANhwAEZwaEAFSSslS-GeKzer0A6wyAW4ZAIsMgDGGQDFDCczshAPYMgGj1X7-QEgr4QCFQ2EI5Go9DnQDWDJjsa9ABragAp1QDqDIA-BkA2gyAZIZAEAMzBqrBe-GVyEAa3KAOwZAJYMgGUGQDSDIBzBmQyox9xCUFiMG4djAwA+tACCQwimceAIiMOCgABgAJCDQ2HIAAk2CmIBmc3y-CIpCYAEJPQqCC9+SnXpstrt9odjqd8udLuhrrcHn4Pky6WGAca+ana298cSybmqlTaak-pXZsqecLxdK5UwgA)

----

```ts
declare global {
  interface Window {
    /** ÁèæÂú®„É≠„Ç∞„Ç§„É≥„Åó„Å¶„ÅÑ„Çã„É¶„Éº„Ç∂„Éº */
    user: User;
  }
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/CYUwxgNghgTiAEBzCB7ARlC8DeAoe8AlgHYAuIMAZlGAgOonAoDuO+B8A9AFTfyB-zoAp1QLcMgBoZAJQyBnhkDqDIDMGQCIMgaIZAZwyAfhkBtDKvjdO7AgFcAzhQBc8AKrGYAbnYBfXHaA)

----

```ts
document.addEventListener("DOMContentLoaded", async () => {
  const response = await fetch('/api/users/current-user');
  const user = (await response.json()) as User;
  window.user = user;  // OK
});

// ... ‰ªñ„ÅÆ„Å©„Åì„Åã„Åß ...
export function greetUser() {
  alert(`Hello ${window.user.name}!`);  // OK
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/CYewxgrgtgpgdgFwHQENjAKIDd4IDICWAzgvDAE4AUARACIDyAsgMIiK54hozDUA0AAhREAnnDADKASgEBeAHwCA3gCgBAsGxIDyMIgActMOUIDuKAggEAzGAjAALSgHIA9Cn0FXEIhSKvIcl1EAFofCmcpAG41DS0rcPITShRzSx09QzhfJAArIjZpGWEBAFVfchj1UwI4UFMkRJNEqPVXVwF6AGkVAF9olRV2gSRRgUA1uUA7BkBLBkBlBkBpBkBzBhHRlRgAD0NyK2sIcQQCNgEAc107coppZViUABsKBEoAAwAJGFvbkAEAEiUaupADUSSDgKFgvQAhE9om0Ot0+kA)

----

```ts
declare global {
  interface Window {
    /** ÁèæÂú®„É≠„Ç∞„Ç§„É≥„Åó„Å¶„ÅÑ„Çã„É¶„Éº„Ç∂„Éº */
    user: User | undefined;
  }
}

// ...
export function greetUser() {
  alert(`Hello ${window.user.name}!`);
  //             ~~~~~~~~~~~ 'window.user' is possibly 'undefined'.
  //                         'window.user' „ÅØ 'undefined' „ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/CYUwxgNghgTiAEBzCB7ARlC8DeAoe8AlgHYAuIMAZlGAgOonAoDuO+B8A9AFTfyB-zoAp1QLcMgBoZAJQyBnhkDqDIDMGQCIMgaIZAZwyAfhkBtDKvjdO7AgFcAzhQBc8AKrGY8AD7x9xUJRIhgAbnYBfXN9ydO8AB0wbggAB4ADigwpPCUDmCkhCjESHAgpJYUABQAlGwEmBSk2QAGABIgEKjwACTYzIwsgUYUgcRQALYgngCEpbkeBP4co2PwAH5T0zMT8ADkjY7NrTDzRIbwUYaGhGgQAJ4LDk4uwPOB7CPjN7cci03MLVbrgPYMx44gzsSu64B2DIB75UAvwGAcgNADIMgCEGQBRDIA-BkAmgyAIAYfEA)

----

```ts
type MyWindow = (typeof window) & {
  /** ÁèæÂú®„É≠„Ç∞„Ç§„É≥„Åó„Å¶„ÅÑ„Çã„É¶„Éº„Ç∂„Éº */
  user: User | undefined;
}

document.addEventListener("DOMContentLoaded", async () => {
  const response = await fetch('/api/users/current-user');
  const user = (await response.json()) as User;
  (window as MyWindow).user = user;  // OK
});

// ...
export function greetUser() {
  alert(`Hello ${(window as MyWindow).user.name}!`);
  //             ~~~~~~~~~~~~~~~~~~~~~~~~~ Object is possibly 'undefined'.
  //                                       „Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅØ 'undefined'
  //                                       „Åß„ÅÇ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/C4TwDgpgBAsiDqBLAdgEwPYHcoF4oApRJ0AzKTFDTASigDIoBvAKCigHoAqTqQP+dAKdUC3DIAaGQCUMgZ4ZA6gyAzBkAiDIGiGQGcMgH4ZAbQzKondqygBXAM4QATgC4oAVUNGoAHz1oIJFBFQBuZgF9mzDAGNdALYQyMAAdACGqKgAogBuwcAAMoj6wMHG+ABEACIA8jAAwughCYnokS6ZADRQ4fogyL4EtDgAfEw6vsWpUEYQ+mDd0HjhmOGIwFAkEMC+ABb4AOTs4WCI7AbG+uz+Rn0hALSbRovU7mxdyD3HuASj45N9A0OhAFb6xfjUtHUWVucEChoLC1fSwBCULDUUI3PDHVxsdjsKC5ADSnjO3iRUFCuOYEAAHoMjJMSLpGsBEMUoABzPozSwZWgsNjhAA2xmA+AABgAJCBstnoKAAEkY+CBVFB4KQwJoMKsoWQ4SCHgAhNzMYjkWxdXrdQA-I3Gk2ms0mlEAI1eEF8kxSUEG+n0iEtbJAUEW5NQjmcqEWoR02P1IdDYfDusAVQyANYZAB0MgHKGQD1DIAJhkA9gye72+5AuRZBnURguFvWAcwZAEIM8kA98qAX4DAOQGgBkGUuAKIZAH4MgE0GQBADJ4gA)
