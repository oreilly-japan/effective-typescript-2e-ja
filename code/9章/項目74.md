# È†ÖÁõÆ74  ÂÆüË°åÊôÇ„Å´Âûã„ÇíÂÜçÊßãÁØâ„Åô„ÇãÊñπÊ≥ï„ÇíÁü•„Çã

## Ë¶ö„Åà„Å¶„Åä„Åè„Åπ„Åç„Åì„Å®

* TypeScript„ÅÆÂûã„ÅØ„Ç≥„Éº„Éâ„ÅÆÂÆüË°åÂâç„Å´Ê∂àÂéª„Åï„Çå„Çã„ÄÇËøΩÂä†„ÅÆ„ÉÑ„Éº„É´„ÇíÂà©Áî®„Åó„Å™„Åë„Çå„Å∞„ÄÅÂÆüË°åÊôÇ„Å´„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Å™„ÅÑ„ÄÇ
* ÂÆüË°åÊôÇ„ÅÆÂûã„ÅÆÈÅ∏ÊäûËÇ¢„ÇíÁü•„Å£„Å¶„Åä„Åè„ÄÇÔºàZod„ÅÆ„Çà„ÅÜ„Å™ÔºâTypeScript„ÅÆÂûã„Å®„ÅØÁï∞„Å™„ÇãÂÆüË°åÊôÇ„ÅÆÂûã„Ç∑„Çπ„ÉÜ„É†„Çí‰ΩøÁî®„Åô„Çã„ÄÅ„Çπ„Ç≠„Éº„Éû„Åã„ÇâTypeScript„ÅÆÂûã„ÇíÁîüÊàê„Åô„ÇãÔºà`json-schema-to-typescript`Ôºâ„ÄÅ„Åæ„Åü„ÅØTypeScript„ÅÆÂûã„Åã„Çâ„Çπ„Ç≠„Éº„Éû„ÇíÁîüÊàê„Åô„ÇãÔºà`typescript-json-schema`Ôºâ„ÄÇ
* Âûã„ÇíÂÆöÁæ©„Åô„ÇãTypeScript„ÅÆÂ§ñÈÉ®„ÅÆ‰ªïÊßòÔºà„Çπ„Ç≠„Éº„Éû„Å™„Å©Ôºâ„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅ„Åù„Çå„Çí‰ø°È†º„Åß„Åç„ÇãÊÉÖÂ†±Ê∫ê„Å®„Åó„Å¶‰Ωø„ÅÜ„ÄÇ
* Â§ñÈÉ®„ÅÆTypeScript„ÅÆÂûã„ÇíÂèÇÁÖß„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅ`typescript-json-schema`„Åæ„Åü„ÅØÂêåÁ≠â„ÅÆ„ÉÑ„Éº„É´„Çí‰Ωø„ÅÜ„ÄÇ
* „Åù„Çå‰ª•Â§ñ„ÅÆÂ†¥Âêà„ÅØ„ÄÅËøΩÂä†„ÅÆ„Éì„É´„Éâ„Çπ„ÉÜ„ÉÉ„Éó„Å®„ÄÅÂûã„ÇíÂÆöÁæ©„Åô„ÇãÊñ∞„Åó„ÅÑÊñπÊ≥ï„Å®„ÄÅ„Å©„Å°„Çâ„Åå„ÅÑ„ÅÑ„ÅãËÄÉ„Åà„Çã„ÄÇ

## „Çµ„É≥„Éó„É´„Ç≥„Éº„Éâ

```ts
interface CreateComment {
  postId: string;
  title: string;
  body: string;
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgMJQnSqD2BbPCcZAbwChlkAHHAZzAEkATALmXqlAHMBuC5MMDAAbCGw7c+lAEY4mAT3FhOIXmQC+QA)

----

```ts
app.post('/comment', (request, response) => {
  const {body} = request;
  if (
    !body ||
    typeof body !== 'object' ||
    Object.keys(body).length !== 3 ||
    !('postId' in body) || typeof body.postId !== 'string' ||
    !('title' in body) || typeof body.title !== 'string' ||
    !('body' in body) || typeof body.body !== 'string'
  ) {
    return response.status(400).send('Invalid request');
  }
  const comment = body as CreateComment;
  // ... „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„É¨„Éô„É´„ÅÆÊ§úË®º„Å®„É≠„Ç∏„ÉÉ„ÇØ ...
  return response.status(200).send('ok');
});
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/IYBxDoQewZwFwBQHID0BjKBbTBTAdnEgDQAECATjgI4CuO8plM0eMOAlCQLwB8JA3gCgSJDKzgCARlAAmATwC+3EpVr04AbmEkAlgDMy2kQEJp8kgB8LRknDkgcUA2bkljXLiSRRJAKxxohJbWIiIA8n4BcOAA1jhyMAgu7OAANvgA5nAAFm4eJADMwTbGyNDwAJIySLp4JMnBtvaOzrJykLBwVXmeSPDkOngZNVYlyHA6cOk1g-VtnFZNDk5z8uATUzg9Xv2Dw8WhbsguM3UNi3bLrWsu231wA0NI2pxCh5RwNOR1TCxs4PBgJ9EgAWAAMYJSbDwMmQFTwADdgKkdDIVNQ6PAkOwtCIFNoxPBRFhcARlLdgDASABhShAnDUkn4TTaFAoEjgTkkQBFDIB1hkAVwyARoZAD8MgHaGQDnDIBnhkANwyATYZANcMgDsGQA4loAeKMAFgyAW4ZAB0MgGGGQD1DBzOdoPl8fvQ-jgAXAgTREgAmCFQ-Cw7wxbFaBQ4oA)

----

```ts
const val = { postId: '123', title: 'First', body: 'That is all'};
type ValType = typeof val;
//   ^? type ValType = { postId: string; title: string; body: string; }
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBAbgQwDYwLwwN4wA4mgSQBMAuGAcgEYAmAZjIBoYoBLKJAU1LIDFmAnaAxgAjEIQCeXACoALBLGYQYyJGQC+AbgBQUcdnYwAasil6D6XfpAAzeMm0B6BzBcA9APxMzRk9-RZcAhIYaD5mMABzDSZWDlJQ8KiRMUkQqDDI6LUgA)

----

```ts
import { z } from 'zod';

// Âûã„ÅÆÊ§úË®º„Å´Áî®„ÅÑ„Çâ„Çå„ÇãÂÆüË°åÊôÇ„ÅÆÂÄ§
const createCommentSchema = z.object({
  postId: z.string(),
  title: z.string(),
  body: z.string(),
});

// ÈùôÁöÑÂûã
type CreateComment = z.infer<typeof createCommentSchema>;
//   ^? type CreateComment = { postId: string; title: string; body: string; }

app.post('/comment', (request, response) => {
  const {body} = request;
  try {
    const comment = createCommentSchema.parse(body);
    //    ^? const comment: { postId: string; title: string; body: string; }
    // ... „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„É¨„Éô„É´„ÅÆÊ§úË®º„Å®„É≠„Ç∏„ÉÉ„ÇØ ...
    return response.status(200).send('ok');
  } catch (e) {
    return response.status(400).send('Invalid request');
  }
});
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYWwDg9gTgLgBAbzgLzgXzgMyhEcDkyEAJvgNwBQFA9NXINHqgdgyA4loDxRg1gyAUroCIMgkQyAxDIGiGQPnagGQjAQmaNAJAoUAxhAB2AZ3iyoAUwCGMdQGFcIdQpgBlWQAt1ITXAC8KAHQQARgCt1smAAoEFOHEgVAEliAC5HFShgBQBzLwBKABo-OBhgGAAbdXDkB0jouKSU5xIATxy8mCjYhOS0eMoaOkBNdMAQt3oKGFKwdThdDW09AyN4e1zozHUoAB4unohMODUtHX0QQ2MzS2sAPkpafzgAPQB+VO7e-pWh9ZG7RACIYLC4fNiyVPSs8LeYj5LiOVXlUCh80FRNGAwA5At58NR5LdjPhEnAvBoAI4AV3UKlRGiUkGU6nidh2iBS8mU8AQANKGHsmJxKko-iqpQphyWihU3KRoyWA1Ww02FismhhmigSnUXjpDRS-gOh1O3OpfI2MHCSFhIR+IPen0y2WB1T+cDp+rNYMVcAODgdcEARQyAdYZAFcMgEaGQA-DIB2hkA5wyAZ4ZADcMgE2GQDXDCxWIALBkAtwyADoZAMMMgHqGOAOhy2jQwLFQBRwAlEmWVbRYpReABMAAYK-E8kZiF58BAANb4BX+DCybQWNEkzmHTPZ3P5nnqItZ0sAFirNZlCnr+CCCgAbpoMsBiHn1NjcTBW6z0BR6mQgA)

----

```ts
export interface CreateComment {
  postId: string;
  title: string;
  body: string;
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/KYDwDg9gTgLgBASwHY2FAZgQwMbDgYSmE1XwgFtzgU4BvAKDjkgGcYBJAEwC442pkAcwDcjODAQwANsF78hopgCMInAJ5yYApCPoBfIA)

----

```ts
import Ajv from 'ajv';

import apiSchema from './api.schema.json';
import {CreateComment} from './api';

const ajv = new Ajv();

app.post('/comment', (request, response) => {
  const {body} = request;
  if (!ajv.validate(apiSchema.definitions.CreateComment, body)) {
    return response.status(400).send('Invalid request');
  }
  const comment = body as CreateComment;
  // ... „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„É¨„Éô„É´„ÅÆÊ§úË®º„Å®„É≠„Ç∏„ÉÉ„ÇØ ...
  return response.status(200).send('ok');
});
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYWwDg9gTgLgBAQQFYDc4DMoRHA5AQ1VwG4AoU0SWOfMYAZQGMALAUxHwyx1wDoB6WsF4BnFu3y8kIiADsSFcNHgBvAMJRW+GKzXYQrWTAC+XbHgFCFpRnJHxCaALxxZrAO6JUACgCUZUlowXkh7b1x+WxADI1wAGjhvTQBHAFdWewTNEUhZEVZfOCcAPjgVUjg4WzzVACMIABMAT1MXFPT7MkrgdESAQkdeFHwAG2AG7VZvISY2Dl4G1nRgWWAYYDteDS0dPWjDGAT65t9C8srKzRhUqFk4bNz80RhtVJFvABYABi-fUUMGuEAJKyYZjBr3VhpDIwXD+CpwYwI6r2Kr6A5FODHJo0ERwbaTPYxGBdOD8fhwXhUuCAIoZAOsMgCuGQCNDIAfhkA7QyAc4ZAM8MgBuGQCbDIBrhkAdgyAHEtADxRgAsGQC3DIAOhkAwwyAeoZKVSEVcbncHnZWM9Xu8AEw-P75WSA3AQADWcLIxn8QA)
